"use strict";sap.ui.define(["ui2/choosingtech/controller/BaseController"],function(t){"use strict";return t.extend("ui2.choosingtech.controller.CostCalculation",{onInit:function e(){t.prototype.init.apply(this,arguments);this.oRouter.getRoute("CostCalculation").attachPatternMatched(this.handleRouteMatched,this);this.oDataModel=this.getOwnerComponent().getModel("dataModel")},handleRouteMatched:function t(){var e=this;var n=["idBtn1","idBtn2","idBtn3","idBtn4","idBtn5","idBtn6"];var i=this.oDataModel.getProperty("/transactions");if(i&&i.length){var o=i.findIndex(function(t){return t.id===e.arguments.transaction});this.getView().bindElement({path:"/transactions/".concat(o),model:"dataModel"});var a=i[o];var s=a.technology||"SAPUI5";this.oDataModel.setProperty("/display/costSelectVisible",!!a.technology);this.currentTech=a.technology||null;var c=this.getView().getModel().getProperty("/tech/list").find(function(t){return t.text===s});this.byId("idIconTab").setSelectedKey(c.key);this.currentTech=c.key;if(!c){c={key:"SAPUI5"}}this.byId("idContentBlock").bindElement("/tech/data/".concat(c.key,"/data"));this.byId("idInfo").bindElement("/tech/data/".concat(c.key,"/data/materials"));var r=a.cost_step||null;n.forEach(function(t){this.byId(t).setPressed(false)}.bind(this));if(r){this.byId("idBtn".concat(r)).setPressed(true)}}else{this.goToPage("StartPage")}},onTechSelect:function t(e){var n=e.getParameter("key");this.byId("idContentBlock").bindElement("/tech/data/".concat(n,"/data"));this.byId("idInfo").bindElement("/tech/data/".concat(n,"/data/materials"));if(this.currentTech&&this.currentTech===n){this.oDataModel.setProperty("/display/costSelectVisible",true)}else{this.oDataModel.setProperty("/display/costSelectVisible",false)}},onCostSelect:function t(e){var n=["idBtn1","idBtn2","idBtn3","idBtn4","idBtn5","idBtn6"];var i=e.getSource().getId().split("--");var o=i[i.length-1];var a=e.getSource().getBinding("text").getPath().split("/")[0];var s=e.getSource().getBinding("text").getValue();if(!e.getParameter("pressed")){a=null;s=null}n.forEach(function(t){if(t!==o){this.byId(t).setPressed(false)}}.bind(this));var c=this.getView().getBindingContext("dataModel");c.getModel().setProperty(c.getPath()+"/cost",s);c.getModel().setProperty(c.getPath()+"/cost_step",a)},getTechnologyText:function t(e){return e||"Не выбрано"},getCostText:function t(e){return e?"".concat(e," чел./час"):"Не рассчитано"},getStatusText:function t(e){return e?"None":"Indication02"},getCostButtonText:function t(e){return"Трудозатраты ".concat(e," чел./час")}})});